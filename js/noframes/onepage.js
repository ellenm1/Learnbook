function IE(a){var b=RegExp("msie"+(!isNaN(a)?("\\s"+a):""),"i");return b.test(navigator.userAgent)}$(document).ready(function(){var b;zVrsn=qsParm.vrsn?qsParm.vrsn:null;$("div.nav-no-collapse.header-nav .breadcrumb").empty();initTracking();$("body").append('<div id="dialog-modal" style="display:none; z-index: 1000;"></div>');$("body").append('<div id="footer"></div>');$("body").unload(function(){SCOUnload()});var a='<div class="navbar-inner"><div class="container-fluid"><div style="display:inline-block;position: absolute;right:0px;" class="footer-nav"><ul class="nav pull-right"><li><a class="btn prevbtn"><i class="icon-arrow-left  prevbtn"></i><span>Prev</span></a></li><li><a class="btn nextbtn"><span>Next</span><i class="icon-arrow-right"></i></a></li></ul></div></div></div>';$("#footer").append(a);checkForStoredVersion(lmsVrsn,znThisPage,dl,zVrsn);$("#sidebar-left li a[id^='itm']").click(function(){var d=this.id.substring(3);var c={itm:d};getContent(c)});$(".prevbtn").click(function(){prevPage(znThisPage);ga("send","event","button","click","prevButton","on page "+znThisPage+1)});$(".nextbtn").click(function(){nextPage(znThisPage);ga("send","event","button","click","nextButton","on page"+znThisPage+1)});$(".expander").click(function(){toggleByChapter();ga("send","event","button","click","expander","on page"+znThisPage+1)});$("#headerSearch").click(function(c){$("#myModal").html('<div id="searchDiv"></div><div id="searchResults"></div> <a class="close-reveal-modal"><span class="closeText">CLOSE</span> &#215;</a>');$(".close-reveal-modal").click(function(d){turnOffMsg()});$("#myModal>#searchDiv").load("includes/search/googleResults.htm");turnOnMsg();c.preventDefault()});if($("#header").css("display")=="block"){$(window).focus();$("input,textarea,button,canvas").focus(function(){busy=true});$("input,textarea,button,canvas").blur(function(){busy=false});$(document).keydown(function(c){if(!busy){if(c.keyCode==37){prevPage(znThisPage)}if(c.keyCode==39){nextPage(znThisPage)}}})}maximizeSabaPlayer()});var bootstrapButton=$.fn.button.noConflict();$.fn.bootstrapBtn=bootstrapButton;function writePage(b,c){var a={itm:b,dl:dl?dl:null};getContent(a)}function maximizeSabaPlayer(){top.window.moveTo(0,0);var b=screen.availWidth>1280?1280:screen.availWidth;var a=screen.availHeight>1024?1024:screen.availHeight;top.window.resizeTo(b,a)}function openModalDialog(a){$(a).dialog(open)}function closeModalDialog(a){$(a).dialog("close")}function checkSubmit(b){var a=encodeURIComponent($("#q").val());$("#searchResults").load("includes/search/proxy3.asp?q="+a)}function checkForStoredVersion(f,b,d,i){if(typeof b=="undefined"){b=(ns.localStorage.get("znThisPage")!="undefined")?ns.localStorage.get("znThisPage"):0}if((f!=null)&&!isNaN(f)){$("#dialog-modal").dialog({close:true,height:140,modal:true});$("#dialog-modal").html("<div id='modal-header'></div><div id='modal-body'>Setting up page list, one moment!</div>");if(f==99){var h=SCOGetValue("cmi.suspend_data");console.log("lmsVrsn==99 and suspendDataFromLMS= "+h);var a=h.indexOf("CustVrsn_");var c=h.indexOf("_CustVrsn");if((a!=-1)&&(c!=-1)){var e=h.substring(a+9,c);var g=(e.split(","));var j=getNewPageList(g);startUpCustomVersion(j,e)}else{alert("custom version selections were not successfully stored in suspendDataFromLMS, so will have to be re-selected")}}else{setVrsn(f,0)}closeModalDialog("#dialog-modal");writePage(b,d)}else{if((i!=null)&&!isNaN(i)){$("#dialog-modal").dialog({close:true,height:140,modal:true});$("#dialog-modal").html("<div id='modal-header'></div><div id='modal-body'>Setting up page list, one moment!</div>");setVrsn(i,0);closeModalDialog("dialog-captivate");writePage(b,d)}else{writePage(b,d)}}}function getNewPageList(d){var b=new Array();var c=$(pagesets.intro).toArray();$.each(c,function(e,f){b.push(c[e])});$.each(d,function(f,g){console.log("i="+f+", val="+g+", pagesets[val]= "+pagesets[g]);var e=$(pagesets[g]).toArray();$.each(e,function(h,i){b.push(e[h])})});var a=$(pagesets.ending).toArray();$.each(a,function(e,f){b.push(a[e])});return b}function startUpCustomVersion(e,b,a){ns.localStorage.set("pageArray",e);ps=ns.localStorage.get("pageArray");SCOSetObjectiveData("version","score.raw","99");window.lmsVrsn=99;ms.vrsn=99;ns.localStorage.set("moduleVars",ms);var d;if((b!=null)&&(typeof b!="undefined")){var c=SCOGetValue("cmi.suspend_data");if(c.indexOf("CustVrsn_")!=-1){d=c.replace(/(CustVrsn_)(.+?)(?= _CustVrsn)/,"$1 "+b);console.log("KLE newstr="+d)}else{d=c+";CustVrsn_"+b+"_CustVrsn"}SCOSetValue("cmi.suspend_data",d);if(testing){console.log("VBN after saving new custom version, suspendData = "+SCOGetValue("cmi.suspend_data"))}}znThisPage=(typeof a!="undefined"&&a>0)?a:0;setupQuizzes();wipePageNo();wipeNavBar();writePage(0,null)}function setupQuizzes(){interactionsQuizzes=false;console.log("in setupQuizzes GPB ps="+ps);for(var b=0;b<ps.length;b++){var g=ps[b];if(typeof g.quiz!="undefined"){quizCount++;qType=(typeof g.type!="undefined")?g.type:"Q";if(qType=="I"){interactionsQuizzes=true
}var e=(qType+g.quiz);if(testing){console.log("in setupQuizzes GPE objectiveID="+e)}var c=parseInt(SCOGetValue("cmi.objectives._count"),10);if(SCOGetObjectiveData(e,"status")){if(testing){console.log("there was an objective for id "+e)}}else{SCOSetObjectiveData(e,"status","")}var a=(SCOGetObjectiveData(e,"status"))?(SCOGetObjectiveData(e,"status")):"";var d=(SCOGetObjectiveData(e,"score.max"))?(SCOGetObjectiveData(e,"score.max")):g.qMax;var f=(SCOGetObjectiveData(e,"score.raw"))?(SCOGetObjectiveData(e,"score.raw")):g.qScore;if(typeof f!="undefined"){g.qScore=parseInt(f,10)}qScore=g.qScore;if((d!="")&&(typeof d!="undefined")&&!isNaN(d)){g.qMax=parseInt(d,10)}qMax=g.qMax;if(testing){console.log("from quizFunctions.js: setupQuizzes");console.log(("itm"+b)+": "+e+", objMax= "+d+", objScore= "+f);console.log("qMax="+qMax+", qScore="+qScore+"qType"+qType)}}}if(interactionsQuizzes){loadInteractions()}ms.quizSetupDone=true;ns.localStorage.set("moduleVars",ms)}function setVrsn(d,b){if(testing){console.log("ETE n="+d+", p="+b)}zLmsVrsn=(lmsVrsn&&!isNaN(lmsVrsn))?lmsVrsn:null;var a=b?b:0;if(!isNaN(d)){zVrsn=d;if(ms.version!=zVrsn){ms.version=zVrsn;var c=window["PageArray"+zVrsn];ns.localStorage.set("pageArray",c);ps=ns.localStorage.get("pageArray");ns.localStorage.set("moduleVars",ms);SetCookie("cVrsn",d,1);zCookieVrsn=ReadCookie("cVrsn");SCOSetObjectiveData("version","score.raw",zVrsn);lmsVrsn=d,zLmsVrsn=d;setTimeout("detArrayVrsn("+d+","+a+")",1000)}}else{setVrsn(0,a)}if(testing){console.log("EEE zVrsn="+zVrsn+" zLmsVrsn="+zLmsVrsn+" zCookieVrsn="+zCookieVrsn)}}function detArrayVrsn(a,c){if(typeof a!="undefined"){if(a==1||a==0){var e=window.PageArray;ns.localStorage.set("pageArray",e);ps=ns.localStorage.get("pageArray");ms.version=a;ns.localStorage.set("version",a);justOpened=false;vrsnDone=true;setupQuizzes()}else{var e=window["PageArray"+a];ns.localStorage.set("pageArray",e);ps=ns.localStorage.get("pageArray");ms.version=a;ns.localStorage.set("version",a);justOpened=false;vrsnDone=true;setupQuizzes()}}if(typeof c!="undefined"&&!isNaN(c)){var b=c}else{b=0}var d={itm:b};getContent(d)}function redirectToFirstPageOfNewVersion(){if((pageHasBeenSet!=1)&&(document.location.href!=PageArray[0].url)){if(testing){console.log("PGG zurl="+zurl+PageArray[0].url)}document.location.href=zurl?zurl:PageArray[0].url;pageHasBeenSet=1}};